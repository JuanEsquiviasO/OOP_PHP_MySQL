/* 
Webflix: Movie, series, Database App
http://mysql.conclase.net/curso/index.php
--- use only create the DB for first time, then delete or comment
*/
DROP DATABASE IF EXISTS webflix;

CREATE DATABASE IF NOT EXISTS webflix;

USE webflix;

-- Catalog Table
CREATE TABLE status(
	status_id INTEGER UNSIGNED PRIMARY KEY AUTO_INCREMENT,
	status VARCHAR(20) NOT NULL
);

-- Data Table
CREATE TABLE movieseries(
	imdb_id CHAR(9) PRIMARY KEY,
	title VARCHAR(80) NOT NULL,
	plot TEXT,
	author VARCHAR(100) DEFAULT 'Pending',
	actors VARCHAR(100) DEFAULT 'Pending',
	country VARCHAR(30) DEFAULT 'Unknown',
	premiere YEAR(4) NOT NULL,
	poster VARCHAR(150) DEFAULT 'no-poster.jpg',
	trailer VARCHAR(150) DEFAULT 'no-trailer.jpg',
	rating DECIMAL(2,1),
	genres VARCHAR(50) NOT NULL,
	status INTEGER UNSIGNED NOT NULL,
	category ENUM('Movie', 'Serie') NOT NULL,
	FULLTEXT KEY search(title, author, actors, genres),
	FOREIGN KEY (status) REFERENCES status(status_id)
		ON DELETE RESTRICT ON UPDATE CASCADE
);

CREATE TABLE users(
	user VARCHAR(15) PRIMARY KEY,
	email VARCHAR(80) UNIQUE NOT NULL,
	name VARCHAR(100) NOT NULL,
	birthday DATE NOT NULL,
	pass CHAR(32) NOT NULL,
	role ENUM('Admin', 'User') NOT NULL

);

/* 'Coming Soon', 'Release', 'In Issue', 'Finished', 'Canceled'  */

INSERT INTO status (status_id, status) VALUES
	(1,'Coming Soon'),
	(2,'Release'),
	(3,'In Issue'),
	(4,'Finished'),
	(5,'Canceled');

INSERT INTO users (user, email, name, birthday, pass, role) VALUES
	('@juanesquivias', 'jesquivias@pucp.edu.pe', 'Juan Esquivias', '1976-07-30', MD5('chafo'), 'Admin'),
	('@user', 'usuario@pucp.edu.pe', 'Usuario Mortal', '2000-12-19', MD5('chimichangas'), 'User');

INSERT INTO movieseries (imdb_id, title, plot, genres, author, actors, country, premiere, trailer, poster, rating, status, category) VALUES
	('tt0903747', 'Breaking Bad', 'When chemistry teacher Walter White is diagnosed with Stage III cancer and given only two years to live, he decides he has nothing to lose. He lives with his teenage son, who has cerebral palsy, and his wife, in New Mexico. Determined to ensure that his family will have a secure future, Walt embarks on a career of drugs and crime. He proves to be remarkably proficient in this new world as he begins manufacturing and selling methamphetamine with one of his former students. The series tracks the impacts of a fatal diagnosis on a regular, hard working man, and explores how a fatal diagnosis affects his morality and transforms him into a major player of the drug trade.', 'Crime, Drama, Thriller', 'Vince Gilligan', 'Bryan Cranston, Anna Gunn, Aaron Paul, Dean Norris', 'USA', '2008', 'http://www.imdb.com/video/imdb/vi338798873?playlistId=tt0903747&ref_=tt_ov_vi', 'https://images-na.ssl-images-amazon.com/images/M/MV5BZDNhNzhkNDctOTlmOS00NWNmLWEyODQtNWMxM2UzYmJiNGMyXkEyXkFqcGdeQXVyNTMxMjgxMzA@._V1_SX300.jpg', 9.5, 4, 'Serie'),
	('tt2820466', 'Justice League: The Flashpoint Paradox', 'An alteration of the timeline for the superhero, The Flash. The Flash must team with other heroes to restore the timeline while the Earth is ravaged by a war between Aquaman and Wonder Woman.', 'Animation, Action, Adventure', 'Jay Oliva', 'Justin Chambers, C. Thomas Howell, Michael B. Jordan, Kevin McKidd', 'USA', '2013', 'https://images-na.ssl-images-amazon.com/images/M/MV5BMTgwNTljYzgtOTU3ZC00ZjhhLTk0YzItY2RiMWU0MGZlNzFjL2ltYWdlXkEyXkFqcGdeQXVyNDQ2MTMzODA@._V1_SX300.jpg', 'http://www.imdb.com/video/imdb/vi3941640473?playlistId=tt2820466&ref_=tt_ov_vi', 8.1, 2, 'Movie'),
	('tt1520211', 'The Walking Dead', 'Sheriff Deputy Rick Grimes gets shot and falls into a coma. When awoken he finds himself in a Zombie Apocalypse. Not knowing what to do he sets out to find his family, after he is done that he gets connected to a group to become the leader. He takes charge and tries to help this group of people survive, find a place to live, and get them food. This show is all about survival, the risks, and the things you will have to do to survive.', 'Drama, Horror, Thriller', 'Frank Darabont', 'Andrew Lincoln, Chandler Riggs, Norman Reedus, Melissa McBride', 'USA', '2010', 'https://images-na.ssl-images-amazon.com/images/M/MV5BMTczMDk1NDYyMV5BMl5BanBnXkFtZTgwNjE1NDU4MDI@._V1_SX300.jpg', 'http://www.imdb.com/video/imdb/vi3188569625?playlistId=tt1520211&ref_=tt_ov_vi', 8.5, 3, 'Serie'),
	('tt0479143', 'Rocky Balboa', 'When he loses a highly publicized virtual boxing match to ex-champ Rocky Balboa, reigning heavyweight titleholder Mason Dixon retaliates by challenging the Itallian Stallion to a nationally televised, 10-round exhibition bout. To the surprise of his son and friends, Rocky agrees to come out of retirement and face an opponent who is faster, stronger and thirty years his junior. With the odds stacked firmly against him, Rocky takes on Dixon in what will become the greatest fight in boxing history, a hard-hitting, action-packed battle of the ages.', 'Drama, Sport', 'Sylvester Stallone', 'Sylvester Stallone, Burt Young, Antonio Tarver, Geraldine Hughes', 'USA', '2006', 'https://images-na.ssl-images-amazon.com/images/M/MV5BNWIyNmQyNjctYmVmMS00MGI4LWIxMmUtNjA0ODYzOTA0Yjk0L2ltYWdlXkEyXkFqcGdeQXVyNTAyODkwOQ@@._V1_SX300.jpg', 'https://youtu.be/8tab8fK2_3w', 7.2, 2, 'Movie'),
	('tt1796960', 'Homeland', 'Carrie Mathison, a CIA operations officer, is on probation after carrying out an unauthorized operation in Iraq. As a result, she has been reassigned to the Counter terrorism center. Whilst in Iraq, she was warned that an American prisoner had been turned by Al-Qaeda. When Nicholas Brody, a U.S. Marine Sergeant, is rescued after being held hostage since 2003, she suspects that he is the one. While Brody is received home as a war hero, Carrie goes to any lengths necessary to catch him out.', 'Crime, Drama, Mystery', 'Alex Gansa', 'Claire Danes, Mandy Patinkin, Rupert Friend, F. Murray Abraham', 'USA', '2011', 'https://images-na.ssl-images-amazon.com/images/M/MV5BMTA1MTA4MjU5MjReQTJeQWpwZ15BbWU4MDg3Mjc0NjAy._V1_SX300.jpg', 'http://www.imdb.com/video/imdb/vi2687612441?playlistId=tt1796960&ref_=tt_ov_vi', 8.4, 3, 'Serie'),
	('tt0468569', 'The Dark Knight', 'Set within a year after the events of Batman Begins, Batman, Lieutenant James Gordon, and new district attorney Harvey Dent successfully begin to round up the criminals that plague Gotham City until a mysterious and sadistic criminal mastermind known only as the Joker appears in Gotham, creating a new wave of chaos.', 'Action, Crime, Drama', 'Christopher Nolan', 'Christian Bale, Heath Ledger, Aaron Eckhart, Michael Caine', 'USA, UK', '2008', 'https://images-na.ssl-images-amazon.com/images/M/MV5BMTMxNTMwODM0NF5BMl5BanBnXkFtZTcwODAyMTk2Mw@@._V1_SX300.jpg', 'https://youtu.be/EXeTwQWrcwY', 9.0, 2, 'Movie'),
	('tt2431438', 'Sense8', 'Sense8 tells the story of eight strangers: Will (Smith), Riley (Middleton), Capheus (Ameen), Sun (Bae), Lito (Silvestre), Kala (Desai), Wolfgang (Riemelt), and Nomi (Clayton). Each individual is from a different culture and part of the world. In the aftermath of a tragic death they all experience through what they perceive as dreams or visions, they suddenly find themselves growing mentally and emotionally connected. While trying to figure how and why this connection happened and what it means, a mysterious man named Jonas tries to help the eight. Meanwhile, another stranger called Whispers attempts to hunt them down, using the same sensate power to gain full access to a sensate is mind (thoughts/sight) after looking into their eyes. Each episode reflects the views of the characters interacting with each other while delving deeper into their backgrounds and what sets them apart and brings them together with the others.', 'Drama, Mystery, Sci-Fi', 'J. Michael Straczynski, Lana Wachowski, Lilly Wachowski', 'Doona Bae, Jamie Clayton, Tina Desai, Tuppence Middleton', 'USA', '2015', 'https://images-na.ssl-images-amazon.com/images/M/MV5BMTU3OTQwOTY2Ml5BMl5BanBnXkFtZTgwMjIzMjYxMjI@._V1_SX300.jpg', 'http://www.imdb.com/video/imdb/vi1435679001?playlistId=tt2431438&ref_=tt_ov_vi', 8.4, 3, 'Serie'),
	('tt0380538', 'Matando Cabos', 'In Mexico City, the powerful and violent magnate of steel Oscar Cabos catches his daughter Paulina having sex with her boyfriend and his employee Javier \"Jaque\" and he works Jaque over. On the next day, Jaque pays a visit to Cabos in his office and the angry man comes with a golf club to hit Jaque again. However, Cabos accidentally trips on a golf ball, falls on the floor and faints. Jaque calls his best friend Mudo to help him, but the janitor Nacho finds his boss fainted on the floor and he steals and dresses himself with Cabos', 'Action, Adventure, Comedy', 'Alejandro Lozano', 'Tony Dalton, Ana Claudia Talancón, Pedro Armendáriz Jr., Kristoff', 'Mexico', '2004', 'https://images-na.ssl-images-amazon.com/images/M/MV5BMTI2MzUzNTc1N15BMl5BanBnXkFtZTcwOTM1NzYyMQ@@._V1_SX300.jpg', 'https://youtu.be/nujJ3sXSU18', 7.6, 2, 'Movie'),
	('tt2654620', 'The Strain', 'A thriller that tells the story of Dr. Ephraim Goodweather, the head of the Center for Disease Control Canary Team in New York City. He and his team are called upon to investigate a mysterious viral outbreak with hallmarks of an ancient and evil strain of vampirism. As the strain spreads, Eph, his team, and an assembly of everyday New Yorkers, wage war for the fate of humanity itself.', 'Drama, Horror, Thriller', 'Guillermo del Toro, Chuck Hogan', 'Corey Stoll, David Bradley, Kevin Durand, Jonathan Hyde', 'USA', '2014', 'https://images-na.ssl-images-amazon.com/images/M/MV5BMTY4NTA4OTgxOF5BMl5BanBnXkFtZTgwMDA0ODM2OTE@._V1_SX300.jpg', 'http://www.imdb.com/video/imdb/vi126531865', 7.5, 3, 'Serie'),
	('tt3076658', 'Creed', 'Adonis Johnson is the son of the famous boxing champion Apollo Creed, who died in a boxing match in Rocky IV (1985). Adonis was not born until after his father iss death and wants to follow his fathers footsteps in boxing. He seeks a mentor who is the former heavyweight boxing champion and former friend of Apollo Creed, the retired Rocky Balboa', 'Drama, Sport', 'Ryan Coogler', 'Michael B. Jordan, Sylvester Stallone, Tessa Thompson, Phylicia Rashad', 'USA', '2015', 'https://images-na.ssl-images-amazon.com/images/M/MV5BODg5NDM1MDI4NF5BMl5BanBnXkFtZTgwMzg0MzQxNzE@._V1_SX300.jpg', 'http://www.imdb.com/video/imdb/vi3155604249', 7.9, 2, 'Movie'),
	('tt2575988', 'Silicon Valley', 'In the high-tech gold rush of modern Silicon Valley, the people most qualified to succeed are the least capable of handling success.', 'Comedy', 'John Altschuler, Mike Judge, Dave Krinsky', 'Thomas Middleditch, T.J. Miller, Josh Brener, Martin Starr', 'USA', '2014', 'https://images-na.ssl-images-amazon.com/images/M/MV5BOTA4MTE3MTQwMF5BMl5BanBnXkFtZTgwNzk4MTg4MTI@._V1_SX300.jpg', 'http://www.imdb.com/video/imdb/vi3360208409', 8.6, 3, 'Serie'),
	('tt4154756', 'Avengers: Infinity War', '', 'Action, Adventure, Fantasy', 'Anthony Russo, Joe Russo', '', 'USA', '2018', 'https://images-na.ssl-images-amazon.com/images/M/MV5BOGQ5NTY3NjktYjIzNS00Y2ZjLWIyODQtMjQzYzg1ZTMzOGI5XkEyXkFqcGdeQXVyNDMwMzEyNzA@._V1_SX300.jpg', '', 0, 1, 'Movie'),
	('tt0851851', 'Terminator: The Sarah Connor Chronicles', 'This series is set after the events of Terminator 2: Judgment Day (1991). After the sacrifices of Dr. Miles Dyson and T-800 Model 101 Terminator, the Connors find themselves once again being stalked by Skynet. Realizing their nightmare is not over, they decide to stop running and focus on preventing the birth of Skynet. With the aid of Cameron Phillips, a beautiful girl who has a mysterious past also linked to the future; Derek Reese, a Tech-Com soldier from the future whose past is linked with the Connors; Riley, a beautiful schoolfriend of John; and FBI Agent James Ellison, who was assigned to capture the Connors but joins them after his own encounter with one of the machines. They begin a quest to stop the United States military and a shadowy conspiracy from the future from creating the program that will stop at nothing to bring humanity to an end.', 'Action, Drama, Sci-F', 'Josh Friedman', 'Lena Headey, Thomas Dekker, Summer Glau, Richard T. Jones', 'USA', '2008', 'https://images-na.ssl-images-amazon.com/images/M/MV5BMTMyNjA5ODIxM15BMl5BanBnXkFtZTcwMTA1MjU1MQ@@._V1_SX300.jpg', 'https://youtu.be/gkIyHSitUMc', 7.7, 5, 'Serie'),
	('tt2527338', 'Star Wars: Episode IX', '', 'Action, Adventure, Fantasy', 'Colin Trevorrow', '', 'USA', '2019', '', '', 0, 1, 'Movie'),
	('tt0455275', 'Prison Break', 'An innocent man is framed for the homicide of the Vice Presidents brother and scheduled to be executed at a super-max penitentiary, thus it is up to his younger brother to save him with his genius scheme: install himself in the same prison by holding up a bank and, as the final month ticks away, launch the escape plan step-by-step to break the both of them out, with his full-body tattoo acting as his guide; a tattoo which hides the layout of the prison facility and necessary clues vital to the escape', 'Action, Crime, Drama', 'Paul Scheuring', 'Dominic Purcell, Wentworth Miller, Amaury Nolasco, Robert Knepper', 'USA', '2005', 'https://images-na.ssl-images-amazon.com/images/M/MV5BMTg3NTkwNzAxOF5BMl5BanBnXkFtZTcwMjM1NjI5MQ@@._V1_SX300.jpg', 'https://youtu.be/AL9zLctDJaU', 8.5, 4, 'Serie'),
	('tt1010048', 'Slumdog Millionaire', 'The story of Jamal Malik, an 18 year-old orphan from the slums of Mumbai, who is about to experience the biggest day of his life. With the whole nation watching, he is just one question away from winning a staggering 20 million rupees on India (2000) (Who Wants To Be A Millionaire?) But when the show breaks for the night, police arrest him on suspicion of cheating; how could a street kid know so much? Desperate to prove his innocence, Jamal tells the story of his life in the slum where he and his brother grew up, of their adventures together on the road, of vicious encounters with local gangs, and of Latika, the girl he loved and lost. Each chapter of his story reveals the key to the answer to one of the game show is questions. Each chapter of Jamal is increasingly layered story reveals where he learned the answers to the show is seemingly impossible quizzes. But one question remains a mystery: what is this young man with no apparent desire for riches really doing on the game show? When the new day dawns and Jamal returns to answer the final question, the Inspector and sixty million viewers are about to find out. At the heart of its storytelling lies the question of how anyone comes to know the things they know about life and love.', 'Drama', 'Danny Boyle, Loveleen Tandan', 'Dev Patel, Saurabh Shukla, Anil Kapoor, Raj Zutshi', 'UK, USA', '2008', 'https://images-na.ssl-images-amazon.com/images/M/MV5BMTU2NTA5NzI0N15BMl5BanBnXkFtZTcwMjUxMjYxMg@@._V1_SX300.jpg', 'http://www.imdb.com/video/imdb/vi2220163097', 8.0, 2, 'Movie'),
	('tt1442449', 'Spartacus', 'The inspiration behind this series is the Thracian Gladiator Spartacus, who led a slave uprising against the Roman Republic. The Thracians had been persuaded by Claudius Glaber to serve as auxiliaries in the Roman legions in a campaign against the Getae, who had often plundered Thracian lands. However after Glaber reneges on the deal and switches his attentions from the Getae to attack Mithridates in Asia Minor, the Thracians feel betrayed and mutiny. Captured by Glaber, Spartacus is condemned to death as a Gladiator, whilst his wife Sura is condemned to slavery. Spartacus, however, proves to be a formidable gladiator, and defeats the four gladiators tasked with executing him. He becomes a favorite of the crowd, leading Senator Albinius to commute his death sentence to a life of slavery. Spartacus is purchased by Batiatus for gladiator training, who promises to help him find Sura if he proves himself in training. As the series develops, the story follows the betrayals and machinations of Roman life and a tale of one man is heroic quest for vengeance.', 'Action, Adventure, Biography', 'Steven S. DeKnight', 'Manu Bennett, Daniel Feuerriegel, Peter Mensah, Lucy Lawless', 'USA, New Zealand', '2013', 'https://images-na.ssl-images-amazon.com/images/M/MV5BOTA2NDU2MzM5Nl5BMl5BanBnXkFtZTcwMTk3Njg3OA@@._V1_SX300.jpg', 'http://www.imdb.com/video/imdb/vi652322329', 8.6, 4, 'Serie'),
	('tt1392190', 'Mad Max: Fury Road', 'An apocalyptic story set in the furthest reaches of our planet, in a stark desert landscape where humanity is broken, and almost everyone is crazed fighting for the necessities of life. Within this world exist two rebels on the run who just might be able to restore order. There is Max, a man of action and a man of few words, who seeks peace of mind following the loss of his wife and child in the aftermath of the chaos. And Furiosa, a woman of action and a woman who believes her path to survival may be achieved if she can make it across the desert back to her childhood homeland.', 'Action, Adventure, Sci-Fi', 'George Miller', 'Tom Hardy, Charlize Theron, Nicholas Hoult, Hugh Keays-Byrne', 'Australia, USA', '2015', 'https://images-na.ssl-images-amazon.com/images/M/MV5BMTUyMTE0ODcxNF5BMl5BanBnXkFtZTgwODE4NDQzNTE@._V1_SX300.jpg', 'http://www.imdb.com/video/imdb/vi3047862297', 8.1, 2, 'Movie'),
	('tt3489184', 'Constantine', 'A man struggling with his faith who is haunted by the sins of his past is suddenly thrust into the role of defending humanity from the gathering forces of darkness.', 'Drama, Fantasy, Horror', 'Daniel Cerone, David S. Goyer', '"Matt Ryan, Harold Perrineau, Angélica Celaya, Charles Halford', 'USA', '2014', 'https://images-na.ssl-images-amazon.com/images/M/MV5BMTQ2MzQzMjA2NF5BMl5BanBnXkFtZTgwODg1MTI4MjE@._V1_SX300.jpg', 'http://www.imdb.com/video/imdb/vi590589721', 7.5, 5, 'Serie'),
	('tt1606384', 'My Way', 'Inspired by a true story. Jun Shik works for Tatsuo grandfather farm while Korea is colonized by Japan, but he has a dream to participate in Tokyo Olympics as a marathon runner. Tatsuo also aims to become a marathon runner, so the two are in rivalry. But war breaks out and they both are forced to enlist in the army. Tatsuo becomes the head of defense in Jun Shik unit and he devises a scheme but fails. Jun Shik and Tatsuo are captured by the Soviets. They run away but soon are captured by Germans and forced to separate. In 1944, they meet again at the shores of Normandy.', 'Action, Drama, History', 'Je-kyu Kang', 'Dong-gun Jang, Joe Odagiri, Bingbing Fan, In-kwon Kim', 'South Korea', '2012', 'https://images-na.ssl-images-amazon.com/images/M/MV5BMjM2MTI4OTc5OF5BMl5BanBnXkFtZTgwNDk1MTAzMjE@._V1_SX300.jpg', 'https://youtu.be/GSSx0ICfEVY', 7.8, 2, 'Movie');